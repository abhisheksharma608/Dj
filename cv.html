<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Abhishek Sharma CV</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
body { display: flex; background: #f4f4f9; color: #333; }
.sidebar { width: 200px; background: #2980b9; color: #fff; min-height: 100vh; padding-top: 20px; position: fixed; }
.sidebar ul { list-style: none; }
.sidebar ul li { padding: 15px; cursor: pointer; }
.sidebar ul li:hover { background: #3498db; }
.container { margin-left: 200px; width: calc(100% - 200px); padding: 20px; }
section { background: #fff; padding: 20px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: none; position: relative; }
section.active { display: block; }
h2 { margin-bottom: 10px; color: #2980b9; }
ul { list-style-type: disc; padding-left: 20px; margin-bottom: 10px; }
ul li { margin-bottom: 5px; }
li[contenteditable="true"] { border-bottom: 1px dashed #ccc; padding: 2px; }
button { padding: 5px 15px; background: #2980b9; color: #fff; border: none; border-radius: 5px; cursor: pointer; margin: 5px 0; }
button:hover { background: #3498db; }
.edit-btn { position: absolute; top: 20px; right: 20px; font-size: 0.8rem; }
#saveBtn, #downloadPdf { width: 100%; }
</style>
</head>
<body>

<!-- jsPDF & html2canvas CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<div class="sidebar">
    <ul>
        <li data-section="header">Home</li>
        <li data-section="education">Education</li>
        <li data-section="technologies">Technologies</li>
        <li data-section="softskills">Soft Skills</li>
        <li data-section="projects">Projects</li>
        <li data-section="tools">Tools</li>
        <li data-section="certificates">Certificates</li>
        <li data-section="contact">Contact</li>
    </ul>
</div>

<div class="container" id="cv-content">
    <!-- Header with photo -->
    <section id="header" class="active" style="text-align:center;">
        <div style="position:relative; display:inline-block;">
            <img id="profile-photo" src="https://via.placeholder.com/120" 
                 alt="Profile Photo" style="width:120px; height:120px; border-radius:50%; object-fit:cover; border:3px solid #2980b9;">
            <button id="edit-photo-btn" 
                    style="position:absolute; bottom:0; right:0; background:#3498db; color:#fff; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer;">✏️</button>
            <input type="file" id="photo-input" accept="image/*" style="display:none;">
        </div>
        <h2 contenteditable="true" id="name">Abhishek Sharma</h2>
        <p contenteditable="true" id="title">Web Developer | Designer | Programmer</p>
        <p contenteditable="true" id="email">Email: abhishek@example.com</p>
        <p contenteditable="true" id="phone">Phone: +91 1234567890</p>
        <p contenteditable="true" id="linkedin">LinkedIn: linkedin.com/in/abhishek</p>
    </section>

    <!-- Other Sections -->
    <section id="education">
        <h2>Education</h2>
        <button class="edit-btn" data-target="education-list">Edit</button>
        <ul id="education-list">
            <li contenteditable="false">B.Tech in Computer Science, XYZ University (2020-2024)</li>
            <li contenteditable="false">High School, ABC School (2018-2020)</li>
        </ul>
    </section>

    <section id="technologies">
        <h2>Technologies</h2>
        <button class="edit-btn" data-target="technologies-list">Edit</button>
        <ul id="technologies-list">
            <li contenteditable="false">HTML, CSS, JavaScript</li>
            <li contenteditable="false">React.js, Node.js</li>
            <li contenteditable="false">Bootstrap, Tailwind CSS</li>
            <li contenteditable="false">REST APIs, JSON</li>
        </ul>
    </section>

    <section id="softskills">
        <h2>Soft Skills</h2>
        <button class="edit-btn" data-target="softskills-list">Edit</button>
        <ul id="softskills-list">
            <li contenteditable="false">Problem Solving</li>
            <li contenteditable="false">Teamwork & Collaboration</li>
            <li contenteditable="false">Communication Skills</li>
            <li contenteditable="false">Adaptability & Creativity</li>
        </ul>
    </section>

    <section id="projects">
        <h2>Projects</h2>
        <button class="edit-btn" data-target="projects-list">Edit</button>
        <ul id="projects-list">
            <li contenteditable="false">Portfolio Website - Built with HTML, CSS, JS</li>
            <li contenteditable="false">Todo App - React.js & Local Storage</li>
            <li contenteditable="false">Chat App - Node.js & Socket.io</li>
        </ul>
    </section>

    <section id="tools">
        <h2>Tools</h2>
        <button class="edit-btn" data-target="tools-list">Edit</button>
        <ul id="tools-list">
            <li contenteditable="false">VS Code</li>
            <li contenteditable="false">Git & GitHub</li>
            <li contenteditable="false">Figma</li>
            <li contenteditable="false">Postman</li>
        </ul>
    </section>

    <section id="certificates">
        <h2>Certificates</h2>
        <button class="edit-btn" data-target="certificates-list">Edit</button>
        <ul id="certificates-list">
            <li contenteditable="false">Front-End Web Development Certification - XYZ Academy</li>
            <li contenteditable="false">JavaScript Advanced Course - ABC Institute</li>
            <li contenteditable="false">React.js & Node.js Fullstack Certification - Online Platform</li>
        </ul>
    </section>

    <section id="contact">
        <h2>Contact</h2>
        <form id="contact-form">
            <input type="text" placeholder="Your Name" required>
            <input type="email" placeholder="Your Email" required>
            <textarea placeholder="Message" required></textarea>
            <button type="submit">Send</button>
        </form>
        <p id="form-message"></p>
    </section>

    <button id="saveBtn">Save All Changes</button>
    <button id="downloadPdf">Download PDF</button>
</div>

<script>
// Sidebar navigation
document.querySelectorAll('.sidebar ul li').forEach(item => {
    item.addEventListener('click', () => {
        const sectionId = item.dataset.section;
        document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');
    });
});

// Section edit toggle
document.querySelectorAll('.edit-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const targetId = btn.dataset.target;
        const ul = document.getElementById(targetId);
        const isEditing = ul.querySelector('li').contentEditable === "true";
        ul.querySelectorAll('li').forEach(li => li.contentEditable = isEditing ? "false" : "true");
        btn.textContent = isEditing ? "Edit" : "Editing...";
    });
});

// Save all changes
document.getElementById('saveBtn').addEventListener('click', () => {
    const sections = ['name','title','email','phone','linkedin','education-list','technologies-list','softskills-list','projects-list','tools-list','certificates-list'];
    sections.forEach(id => {
        const el = document.getElementById(id);
        if(el.tagName === 'UL'){
            const items = Array.from(el.querySelectorAll('li')).map(li => li.textContent);
            localStorage.setItem(id, JSON.stringify(items));
        } else {
            localStorage.setItem(id, el.textContent);
        }
    });
    alert("Changes saved!");
});

// Load saved data
window.addEventListener('load', () => {
    const sections = ['name','title','email','phone','linkedin','education-list','technologies-list','softskills-list','projects-list','tools-list','certificates-list'];
    sections.forEach(id => {
        const el = document.getElementById(id);
        const saved = localStorage.getItem(id);
        if(saved){
            if(el.tagName === 'UL'){
                const items = JSON.parse(saved);
                el.innerHTML = '';
                items.forEach(text => {
                    const li = document.createElement('li');
                    li.textContent = text;
                    li.contentEditable = "false";
                    el.appendChild(li);
                });
            } else {
                el.textContent = saved;
            }
        }
    });

    // Load saved photo
    const savedPhoto = localStorage.getItem("profile-photo");
    if(savedPhoto) document.getElementById("profile-photo").src = savedPhoto;
});

// Contact form
document.getElementById('contact-form').addEventListener('submit', e => {
    e.preventDefault();
    document.getElementById('form-message').textContent = "Thank you! Your message has been sent.";
    e.target.reset();
});

// Download PDF
document.getElementById('downloadPdf').addEventListener('click', () => {
    const cv = document.getElementById('cv-content');
    document.querySelectorAll('section').forEach(sec => sec.classList.add('active'));
    html2canvas(cv).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jspdf.jsPDF('p','mm','a4');
        const imgProps = pdf.getImageProperties(imgData);
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
        pdf.addImage(imgData,'PNG',0,0,pdfWidth,pdfHeight);
        pdf.save('Abhishek_Sharma_CV.pdf');
        document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
        document.querySelector('section.active').classList.add('active');
    });
});

// Profile photo edit
const editPhotoBtn = document.getElementById("edit-photo-btn");
const photoInput = document.getElementById("photo-input");
const profilePhoto = document.getElementById("profile-photo");

editPhotoBtn.addEventListener("click", () => photoInput.click());

photoInput.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = () => {
            profilePhoto.src = reader.result;
            localStorage.setItem("profile-photo", reader.result);
        };
        reader.readAsDataURL(file);
    }
});
</script>
</body>
</html>